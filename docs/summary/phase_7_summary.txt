PHASE 7 — Visualization & Interface
Status: Complete

OVERVIEW
Phase 7 introduced reproducible demo scenes, a command-line interface, 
static plotting utilities, and animation support. 

No changes were made to:
- Physics implementation
- Integrators
- Solvers
- Core simulation engine logic

The purpose of this phase was to make the system runnable, inspectable, 
and demonstrable without modifying source code.


STEP A — Predefined Scenes


Added a scenes module containing deterministic initial conditions:

- two_body
- three_body (figure-eight configuration)
- random_cluster (seeded, optional virialisation)
- disk (rotating disk distribution)

Scenes are independent of solver, integrator, dt, and softening.
Seeded randomness ensures reproducibility.


STEP B — Command-Line Interface


Implemented code/nbody/cli.py using argparse.

Features:
- run command
- list-scenes command
- Scene selection
- Solver selection (Direct / Barnes–Hut)
- Integrator selection (Euler / Leapfrog)
- Parameter overrides (dt, steps, softening, θ)
- Energy diagnostics flag

Design principles:
- Stateless execution
- CLI validation separate from simulation core
- Scene defaults defined at interface level


STEP C — Static Plot Outputs


Added plotting utilities in viz.py.

Generated outputs:
- final_xy_full.png
- final_xy_zoom.png
- energy_drift.png

Energy drift normalized using:
E_scale = max(|E0|, |K0| + |U0|, ε)

Outputs saved to timestamped directories.


STEP D — Frame Sampling


Added:
- record_frames flag
- frame_every sampling interval
- frames list storing (x, y, z) only

Purpose:
Support animation without storing full state history.


STEP E — 2D Animation


Implemented animate_xy(...) using matplotlib FuncAnimation.

Added CLI flags:
- --animate
- --frame-every
- --interval

Scene adjustments made to ensure stable behaviour under G = 4π².

Animation uses:
- XY projection
- Sampled frames
- Decoupled playback speed


STEP E (Extension) — Aesthetic Improvements


Added space-style defaults:
- Black background
- Static starfield
- Percentile-based camera bounds
- Marker size scaling by N

Introduced per-scene run presets for stable demo defaults.


STEP F — Animation Saving


Added:
- save_animation(...) helper
- GIF export (PillowWriter)
- MP4 export (FFMpegWriter)
- CLI flags: --save-gif, --save-mp4, --fps, --no-show
- Unified output directory creation


STEP F — 3D Visualization


Added:
- animate_xyz(...) for 3D animation
- plot_frame_xyz(...) for static 3D snapshots
- CLI flags:
  --animate-3d
  --max-3d-n
  --snapshots
- Automatic fallback to snapshots for large N


STEP F (extra) — new scene


Added:
- extra scene benchmark_cluster() for testing barneshut vs direct scenes.py
- benchmark cluster scene in SCENES cli.py
- benchmark cluster scene in KWARGS cli.py




LIMITATIONS


- 3D animation does not include camera rotation.
- Large-N 3D plots may appear visually dense.
- Disk model is visually tuned, not dynamically exact.
- Implementation remains pure Python.


CONCLUSION


Phase 7 completed the interface and visualization layer of the project.
The simulation framework can now be run, inspected, and exported entirely
through the CLI without modifying source files.